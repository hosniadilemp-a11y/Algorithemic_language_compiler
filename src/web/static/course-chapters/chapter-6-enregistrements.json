{
  "id": "enregistrements",
  "title": "Chapitre 6: Les Enregistrements",
  "sections": [
    {
      "title": "Contexte et problematique",
      "content": "Quand on utilise uniquement des variables simples et des tableaux, on represente difficilement des objets reels complexes.\n\nUn tableau est utile, mais il impose un type unique pour toutes ses cases.\n\n[[DEF]] L'enregistrement est la structure adaptee pour regrouper des donnees heterogenes dans une meme entite logique."
    },
    {
      "title": "Definition et vocabulaire formel",
      "content": "Un enregistrement est compose de **champs**.\n\nChaque champ possede:\n- un identificateur,\n- un type (`Entier`, `Reel`, `Chaine`, `Tableau`, ou un autre enregistrement).\n\n[[NOTE]] Avant de declarer une variable de type enregistrement, il faut d'abord declarer le type dans `Type`."
    },
    {
      "title": "Syntaxe de definition (forme generale)",
      "content": "La definition se place dans la partie `Type`, avant la partie `Var`.",
      "code": "Type <Nom_Type> = Enregistrement\nDebut\n    <Champ_1> : <Type_1>;\n    <Champ_2> : <Type_2>;\n    ...\n    <Champ_N> : <Type_N>;\nFin;"
    },
    {
      "title": "Exemple principal: type Date",
      "content": "Le type `Date` montre la logique de construction d'un enregistrement simple.",
      "code": "Type Date = Enregistrement\nDebut\n    jour : Entier;\n    mois : Chaine[12];\n    annee : Entier;\nFin;"
    },
    {
      "title": "Declaration de variables",
      "content": "Une fois le type defini, la declaration se fait comme pour les types de base.",
      "code": "Var\n    d1, d2 : Date;\n    dateNaissance : Date;"
    },
    {
      "title": "Acces aux champs: notation pointee",
      "content": "La notation `variable.champ` est la base de la manipulation.",
      "code": "d1.jour := 26;\nd1.mois := \"Fevrier\";\nd1.annee := 2026;\nEcrire(d1.jour, \"/\", d1.mois, \"/\", d1.annee);"
    },
    {
      "title": "Exercice guide: type Temps",
      "content": "Definir `Temps(heure, minute, seconde)`, lire une variable `T`, puis afficher sa conversion en secondes.\n\n[[ALERT]] Valider les bornes (`0<=minute<60`, `0<=seconde<60`) avant le calcul.",
      "code": "Type Temps = Enregistrement\nDebut\n    heure, minute, seconde : Entier;\nFin;\n\nAlgorithme ConversionTemps;\nVar\n    T : Temps;\n    total : Entier;\nDebut\n    Lire(T.heure);\n    Lire(T.minute);\n    Lire(T.seconde);\n\n    Si (T.minute < 0) Ou (T.minute >= 60) Ou\n       (T.seconde < 0) Ou (T.seconde >= 60) Alors\n        Ecrire(\"Temps invalide\");\n    Sinon\n        total := T.heure * 3600 + T.minute * 60 + T.seconde;\n        Ecrire(\"Total secondes = \", total);\n    Fin Si;\nFin."
    },
    {
      "title": "Affectation entre enregistrements",
      "content": "Si deux variables sont du meme type enregistrement, l'affectation globale est autorisee.",
      "code": "Var\n    d1, d2 : Date;\nDebut\n    d1 := d2;\nFin."
    },
    {
      "title": "Comparaison d'enregistrements",
      "content": "Dans ce cours, on prefere la comparaison champ par champ.",
      "code": "Si (d1.jour = d2.jour) ET\n   (d1.mois = d2.mois) ET\n   (d1.annee = d2.annee) Alors\n    Ecrire(\"Dates egales\");\nSinon\n    Ecrire(\"Dates differentes\");\nFin Si;"
    },
    {
      "title": "Tableaux d'enregistrements",
      "content": "Un tableau peut contenir des enregistrements.",
      "code": "Type Etudiant = Enregistrement\nDebut\n    matricule : Entier;\n    nom, prenom : Chaine[25];\nFin;\n\nVar\n    Classe[50] : Tableau De Etudiant;\n\nEcrire(Classe[5].nom);"
    },
    {
      "title": "Champs de type tableau",
      "content": "Un enregistrement peut contenir un tableau comme champ.",
      "code": "Type Etudiant = Enregistrement\nDebut\n    nom, prenom : Chaine[25];\n    notes : Tableau[8] De Reel;\nFin;\n\nVar E : Etudiant;\n\nE.notes[3] := 14.5;\nEcrire(E.notes[3]);"
    },
    {
      "title": "Enregistrements imbriques",
      "content": "Un champ peut lui-meme etre un enregistrement.",
      "code": "Type Date = Enregistrement\nDebut\n    jour, mois, annee : Entier;\nFin;\n\nType Adresse = Enregistrement\nDebut\n    commune, wilaya : Chaine[20];\nFin;\n\nType Personne = Enregistrement\nDebut\n    nom : Chaine[25];\n    ne_le : Date;\n    adr : Adresse;\nFin;\n\nVar P : Personne;"
    },
    {
      "title": "Arborescence d'acces",
      "content": "La manipulation suit une arborescence: objet principal -> sous-objet -> champ final.",
      "code": "P.nom := \"HOSNI\";\nP.ne_le.jour := 26;\nP.ne_le.mois := 2;\nP.ne_le.annee := 2000;\nP.adr.commune := \"Annaba\";\nP.adr.wilaya := \"Annaba\";"
    },
    {
      "title": "Bonnes pratiques",
      "content": "- Donner des noms de types explicites.\n- Initialiser les champs essentiels avant usage.\n- Separer types de donnees et logique de traitement.\n- Valider les champs sensibles."
    },
    {
      "title": "Erreurs frequentes",
      "content": "- Type non defini avant `Var`.\n- Confusion entre affectation et comparaison.\n- Oubli d'initialisation dans des structures imbriquees."
    },
    {
      "title": "Exercice 2: Gestion complete des etudiants",
      "content": "<div class=\"course-exercise\">\n  <div class=\"course-exercise-title\"><i class=\"fas fa-user-graduate\"></i> Exercice 2 : Gestion complete des etudiants</div>\n  <p>Lire un tableau d'etudiants (date de naissance + 8 notes), trier par date de naissance, calculer les moyennes, puis extraire les etudiants ayant au moins une note eliminatoire (&lt; 7).</p>\n  <details class=\"course-solution-details\"><summary>Voir la solution complete</summary>\n<pre class=\"course-solution-code\">Algorithme Exo2_GestionEtudiants;\nConst MAX = 50;\nType Date = Enregistrement\nDebut\n    jour, mois, annee : Entier;\nFin;\nType Etudiant = Enregistrement\nDebut\n    nom, prenom : Chaine[25];\n    naissance : Date;\n    notes : Tableau[8] De Reel;\nFin;\nVar\n    T[MAX] : Tableau De Etudiant;\n    Eliminatoires[MAX] : Tableau De Entier;\n    N, i, j, nbElim : Entier;\n\n    Fonction ComparerDates(d1, d2 : Date) : Entier\nDebut\n    Si d1.annee <> d2.annee Alors\n        Retourner d1.annee - d2.annee;\n    Sinon Si d1.mois <> d2.mois Alors\n        Retourner d1.mois - d2.mois;\n    Sinon\n        Retourner d1.jour - d2.jour;\n    Fin Si;\nFin;\n\nFonction CalculerMoyenne(E : Etudiant) : Reel\nVar k : Entier; s : Reel;\nDebut\n    s := 0;\n    Pour k := 0 a 7 Faire\n        s := s + E.notes[k];\n    Fin Pour;\n    Retourner s / 8;\nFin;\n\nFonction AUneNoteEliminatoire(E : Etudiant) : Booleen\nVar k : Entier;\nDebut\n    Pour k := 0 a 7 Faire\n        Si E.notes[k] < 7 Alors\n            Retourner Vrai;\n        Fin Si;\n    Fin Pour;\n    Retourner Faux;\nFin;\n\nDebut\n    Lire(N);\n    Pour i := 0 a N-1 Faire\n        Lire(T[i].nom);\n        Lire(T[i].prenom);\n        Lire(T[i].naissance.jour);\n        Lire(T[i].naissance.mois);\n        Lire(T[i].naissance.annee);\n        Pour j := 0 a 7 Faire\n            Lire(T[i].notes[j]);\n        Fin Pour;\n    Fin Pour;\n\n    Pour i := 0 a N-2 Faire\n        Pour j := i+1 a N-1 Faire\n            Si ComparerDates(T[i].naissance, T[j].naissance) > 0 Alors\n                Echanger(T[i], T[j]);\n            Fin Si;\n        Fin Pour;\n    Fin Pour;\n\n    nbElim := 0;\n    Pour i := 0 a N-1 Faire\n        Ecrire(T[i].nom, ' ', T[i].prenom, ' Moy=', CalculerMoyenne(T[i]));\n        Si AUneNoteEliminatoire(T[i]) Alors\n            Eliminatoires[nbElim] := i;\n            nbElim := nbElim + 1;\n        Fin Si;\n    Fin Pour;\n\n    Ecrire('Nombre etudiants avec note eliminatoire = ', nbElim);\nFin.</pre>\n<button class=\"course-solution-run\" data-code=\"Algorithme Exo2_GestionEtudiants;&#10;Const MAX = 50;&#10;Type Date = Enregistrement&#10;Debut&#10;    jour, mois, annee : Entier;&#10;Fin;&#10;Type Etudiant = Enregistrement&#10;Debut&#10;    nom, prenom : Chaine[25];&#10;    naissance : Date;&#10;    notes : Tableau[8] De Reel;&#10;Fin;&#10;Var&#10;    T[MAX] : Tableau De Etudiant;&#10;    Eliminatoires[MAX] : Tableau De Entier;&#10;    N, i, j, nbElim : Entier;&#10;&#10;    Fonction ComparerDates(d1, d2 : Date) : Entier&#10;Debut&#10;    Si d1.annee <> d2.annee Alors&#10;        Retourner d1.annee - d2.annee;&#10;    Sinon Si d1.mois <> d2.mois Alors&#10;        Retourner d1.mois - d2.mois;&#10;    Sinon&#10;        Retourner d1.jour - d2.jour;&#10;    Fin Si;&#10;Fin;&#10;&#10;Fonction CalculerMoyenne(E : Etudiant) : Reel&#10;Var k : Entier; s : Reel;&#10;Debut&#10;    s := 0;&#10;    Pour k := 0 a 7 Faire&#10;        s := s + E.notes[k];&#10;    Fin Pour;&#10;    Retourner s / 8;&#10;Fin;&#10;&#10;Fonction AUneNoteEliminatoire(E : Etudiant) : Booleen&#10;Var k : Entier;&#10;Debut&#10;    Pour k := 0 a 7 Faire&#10;        Si E.notes[k] < 7 Alors&#10;            Retourner Vrai;&#10;        Fin Si;&#10;    Fin Pour;&#10;    Retourner Faux;&#10;Fin;&#10;&#10;Debut&#10;    Lire(N);&#10;    Pour i := 0 a N-1 Faire&#10;        Lire(T[i].nom);&#10;        Lire(T[i].prenom);&#10;        Lire(T[i].naissance.jour);&#10;        Lire(T[i].naissance.mois);&#10;        Lire(T[i].naissance.annee);&#10;        Pour j := 0 a 7 Faire&#10;            Lire(T[i].notes[j]);&#10;        Fin Pour;&#10;    Fin Pour;&#10;&#10;    Pour i := 0 a N-2 Faire&#10;        Pour j := i+1 a N-1 Faire&#10;            Si ComparerDates(T[i].naissance, T[j].naissance) > 0 Alors&#10;                Echanger(T[i], T[j]);&#10;            Fin Si;&#10;        Fin Pour;&#10;    Fin Pour;&#10;&#10;    nbElim := 0;&#10;    Pour i := 0 a N-1 Faire&#10;        Ecrire(T[i].nom, ' ', T[i].prenom, ' Moy=', CalculerMoyenne(T[i]));&#10;        Si AUneNoteEliminatoire(T[i]) Alors&#10;            Eliminatoires[nbElim] := i;&#10;            nbElim := nbElim + 1;&#10;        Fin Si;&#10;    Fin Pour;&#10;&#10;    Ecrire('Nombre etudiants avec note eliminatoire = ', nbElim);&#10;Fin.\">Exécuter cette solution</button>\n</details>\n</div>"
    },
    {
      "title": "Exercice 3: Gestion de bibliotheque",
      "content": "<div class=\"course-exercise\">\n  <div class=\"course-exercise-title\"><i class=\"fas fa-book\"></i> Exercice 3 : Gestion de bibliotheque</div>\n  <p>Calculer les jours de retard d'un emprunt, l'amende (50 DA/jour), et le total global des amendes.</p>\n  <details class=\"course-solution-details\"><summary>Voir la solution complete</summary>\n<pre class=\"course-solution-code\">Algorithme Exo3_Bibliotheque;\nConst AMENDE_JOUR = 50;\nType Date = Enregistrement\nDebut\n    jour, mois, annee : Entier;\nFin;\nType Livre = Enregistrement\nDebut\n    isbn : Chaine[20];\n    titre : Chaine[60];\nFin;\nType Emprunt = Enregistrement\nDebut\n    livre : Livre;\n    dateRetourPrevue : Date;\n    dateRetourReelle : Date;\nFin;\nVar\n    E[200] : Tableau De Emprunt;\n    n, i, totalAmende : Entier;\n\n    Fonction DateEnJours(d : Date) : Entier\nDebut\n    Retourner d.annee * 365 + d.mois * 30 + d.jour;\nFin;\n\nFonction JoursRetard(emp : Emprunt) : Entier\nVar r : Entier;\nDebut\n    r := DateEnJours(emp.dateRetourReelle) - DateEnJours(emp.dateRetourPrevue);\n    Si r < 0 Alors\n        Retourner 0;\n    Sinon\n        Retourner r;\n    Fin Si;\nFin;\n\nDebut\n    Lire(n);\n    totalAmende := 0;\n    Pour i := 0 a n-1 Faire\n        Lire(E[i].livre.isbn);\n        Lire(E[i].livre.titre);\n        Lire(E[i].dateRetourPrevue.jour);\n        Lire(E[i].dateRetourPrevue.mois);\n        Lire(E[i].dateRetourPrevue.annee);\n        Lire(E[i].dateRetourReelle.jour);\n        Lire(E[i].dateRetourReelle.mois);\n        Lire(E[i].dateRetourReelle.annee);\n\n        Si JoursRetard(E[i]) > 0 Alors\n            Ecrire(E[i].livre.titre, ' retard=', JoursRetard(E[i]), ' amende=', JoursRetard(E[i]) * AMENDE_JOUR);\n            totalAmende := totalAmende + JoursRetard(E[i]) * AMENDE_JOUR;\n        Fin Si;\n    Fin Pour;\n\n    Ecrire('Total amendes = ', totalAmende);\nFin.</pre>\n<button class=\"course-solution-run\" data-code=\"Algorithme Exo3_Bibliotheque;&#10;Const AMENDE_JOUR = 50;&#10;Type Date = Enregistrement&#10;Debut&#10;    jour, mois, annee : Entier;&#10;Fin;&#10;Type Livre = Enregistrement&#10;Debut&#10;    isbn : Chaine[20];&#10;    titre : Chaine[60];&#10;Fin;&#10;Type Emprunt = Enregistrement&#10;Debut&#10;    livre : Livre;&#10;    dateRetourPrevue : Date;&#10;    dateRetourReelle : Date;&#10;Fin;&#10;Var&#10;    E[200] : Tableau De Emprunt;&#10;    n, i, totalAmende : Entier;&#10;&#10;    Fonction DateEnJours(d : Date) : Entier&#10;Debut&#10;    Retourner d.annee * 365 + d.mois * 30 + d.jour;&#10;Fin;&#10;&#10;Fonction JoursRetard(emp : Emprunt) : Entier&#10;Var r : Entier;&#10;Debut&#10;    r := DateEnJours(emp.dateRetourReelle) - DateEnJours(emp.dateRetourPrevue);&#10;    Si r < 0 Alors&#10;        Retourner 0;&#10;    Sinon&#10;        Retourner r;&#10;    Fin Si;&#10;Fin;&#10;&#10;Debut&#10;    Lire(n);&#10;    totalAmende := 0;&#10;    Pour i := 0 a n-1 Faire&#10;        Lire(E[i].livre.isbn);&#10;        Lire(E[i].livre.titre);&#10;        Lire(E[i].dateRetourPrevue.jour);&#10;        Lire(E[i].dateRetourPrevue.mois);&#10;        Lire(E[i].dateRetourPrevue.annee);&#10;        Lire(E[i].dateRetourReelle.jour);&#10;        Lire(E[i].dateRetourReelle.mois);&#10;        Lire(E[i].dateRetourReelle.annee);&#10;&#10;        Si JoursRetard(E[i]) > 0 Alors&#10;            Ecrire(E[i].livre.titre, ' retard=', JoursRetard(E[i]), ' amende=', JoursRetard(E[i]) * AMENDE_JOUR);&#10;            totalAmende := totalAmende + JoursRetard(E[i]) * AMENDE_JOUR;&#10;        Fin Si;&#10;    Fin Pour;&#10;&#10;    Ecrire('Total amendes = ', totalAmende);&#10;Fin.\">Exécuter cette solution</button>\n</details>\n</div>"
    },
    {
      "title": "Exercice 4: Carnet de contacts intelligent",
      "content": "<div class=\"course-exercise\">\n  <div class=\"course-exercise-title\"><i class=\"fas fa-address-book\"></i> Exercice 4 : Carnet de contacts intelligent</div>\n  <p>Implementer: recherche partielle par nom, filtre par ville et detection d'emails invalides.</p>\n  <details class=\"course-solution-details\"><summary>Voir la solution complete</summary>\n<pre class=\"course-solution-code\">Algorithme Exo4_Contacts;\nType Adresse = Enregistrement\nDebut\n    ville : Chaine[30];\n    rue : Chaine[40];\nFin;\nType Contact = Enregistrement\nDebut\n    nom, prenom : Chaine[25];\n    email : Chaine[60];\n    categorie : Chaine[20];\n    adr : Adresse;\nFin;\nVar\n    C[300] : Tableau De Contact;\n    n, i, invalides : Entier;\n    motCle, villeRef : Chaine;\n\n    Fonction EstEmailValide(e : Chaine) : Booleen\nDebut\n    Retourner (Position('@', e) > 1) Et (Position('.', e) > Position('@', e) + 1);\nFin;\n\nDebut\n    Lire(n);\n    Pour i := 0 a n-1 Faire\n        Lire(C[i].nom);\n        Lire(C[i].prenom);\n        Lire(C[i].email);\n        Lire(C[i].categorie);\n        Lire(C[i].adr.ville);\n        Lire(C[i].adr.rue);\n    Fin Pour;\n\n    Lire(motCle);\n    Pour i := 0 a n-1 Faire\n        Si Contient(C[i].nom, motCle) Alors\n            Ecrire('Trouve: ', C[i].nom, ' ', C[i].prenom);\n        Fin Si;\n    Fin Pour;\n\n    Lire(villeRef);\n    Pour i := 0 a n-1 Faire\n        Si C[i].adr.ville = villeRef Alors\n            Ecrire('Ville ', villeRef, ': ', C[i].nom, ' ', C[i].prenom);\n        Fin Si;\n    Fin Pour;\n\n    invalides := 0;\n    Pour i := 0 a n-1 Faire\n        Si NON EstEmailValide(C[i].email) Alors\n            invalides := invalides + 1;\n            Ecrire('Email invalide: ', C[i].email, ' (', C[i].nom, ')');\n        Fin Si;\n    Fin Pour;\n\n    Ecrire('Total emails invalides = ', invalides);\nFin.</pre>\n<button class=\"course-solution-run\" data-code=\"Algorithme Exo4_Contacts;&#10;Type Adresse = Enregistrement&#10;Debut&#10;    ville : Chaine[30];&#10;    rue : Chaine[40];&#10;Fin;&#10;Type Contact = Enregistrement&#10;Debut&#10;    nom, prenom : Chaine[25];&#10;    email : Chaine[60];&#10;    categorie : Chaine[20];&#10;    adr : Adresse;&#10;Fin;&#10;Var&#10;    C[300] : Tableau De Contact;&#10;    n, i, invalides : Entier;&#10;    motCle, villeRef : Chaine;&#10;&#10;    Fonction EstEmailValide(e : Chaine) : Booleen&#10;Debut&#10;    Retourner (Position('@', e) > 1) Et (Position('.', e) > Position('@', e) + 1);&#10;Fin;&#10;&#10;Debut&#10;    Lire(n);&#10;    Pour i := 0 a n-1 Faire&#10;        Lire(C[i].nom);&#10;        Lire(C[i].prenom);&#10;        Lire(C[i].email);&#10;        Lire(C[i].categorie);&#10;        Lire(C[i].adr.ville);&#10;        Lire(C[i].adr.rue);&#10;    Fin Pour;&#10;&#10;    Lire(motCle);&#10;    Pour i := 0 a n-1 Faire&#10;        Si Contient(C[i].nom, motCle) Alors&#10;            Ecrire('Trouve: ', C[i].nom, ' ', C[i].prenom);&#10;        Fin Si;&#10;    Fin Pour;&#10;&#10;    Lire(villeRef);&#10;    Pour i := 0 a n-1 Faire&#10;        Si C[i].adr.ville = villeRef Alors&#10;            Ecrire('Ville ', villeRef, ': ', C[i].nom, ' ', C[i].prenom);&#10;        Fin Si;&#10;    Fin Pour;&#10;&#10;    invalides := 0;&#10;    Pour i := 0 a n-1 Faire&#10;        Si NON EstEmailValide(C[i].email) Alors&#10;            invalides := invalides + 1;&#10;            Ecrire('Email invalide: ', C[i].email, ' (', C[i].nom, ')');&#10;        Fin Si;&#10;    Fin Pour;&#10;&#10;    Ecrire('Total emails invalides = ', invalides);&#10;Fin.\">Exécuter cette solution</button>\n</details>\n</div>"
    }
  ]
}